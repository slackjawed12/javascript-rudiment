<!DOCTYPE html>
<html>
  <body>
    <button class="btn1">0</button>
    <button class="btn2">0</button>
    <script>
      class App{
        constructor(){
          this.$button1 = document.querySelector('.btn1');
          this.$button2 = document.querySelector('.btn2');
          this.count = 0;
          // TypeError 발생 : 핸들러의 this는 DOM 요소인 this(클래스의 this).$button
          // this.$button.onclick = this.increase;

          // option 1 : bind 사용 increase 메서드 내부의 this가 인스턴스를 가리킴
          this.$button1.onclick = this.increase.bind(this);
          // option 2 : 화살표 함수를 핸들러로 등록
          this.$button2.onclick = this.increaseV2;
        }

        increase(){
          console.log(this);
          this.$button1.textContent = ++this.count;
        }

        // 클래스 필드 정의 : this는 생성되는 App 인스턴스임.
        increaseV2 = () => {
          console.log(this);
          this.$button2.textContent = ++this.count;
        }
      }
      new App();
    </script>
  </body>
</html>